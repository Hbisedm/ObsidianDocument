import{_ as s,c as n,o as a,a as l}from"./app.c99ff793.js";const i=JSON.parse('{"title":"CSS 动态控制颜色","description":"","frontmatter":{"title":"CSS 动态控制颜色","date":"2022-06-06T11:01:09.000Z","tags":["CSS"]},"headers":[{"level":2,"title":"clamp","slug":"clamp","link":"#clamp","children":[]},{"level":2,"title":"通过饱和度变化","slug":"通过饱和度变化","link":"#通过饱和度变化","children":[{"level":3,"title":"效果图","slug":"效果图","link":"#效果图","children":[]}]},{"level":2,"title":"完全控制颜色","slug":"完全控制颜色","link":"#完全控制颜色","children":[{"level":3,"title":"效果图","slug":"效果图-1","link":"#效果图-1","children":[]}]},{"level":2,"title":"自动背景颜色变化","slug":"自动背景颜色变化","link":"#自动背景颜色变化","children":[{"level":3,"title":"效果图","slug":"效果图-2","link":"#效果图-2","children":[]},{"level":3,"title":"效果图","slug":"效果图-3","link":"#效果图-3","children":[]}]},{"level":2,"title":"自动变色的进度条","slug":"自动变色的进度条","link":"#自动变色的进度条","children":[]},{"level":2,"title":"总结","slug":"总结","link":"#总结","children":[]},{"level":2,"title":"参考链接","slug":"参考链接","link":"#参考链接","children":[]}],"relativePath":"工作区/基本知识/CSS/CSS 动态控制颜色.md"}'),p={name:"工作区/基本知识/CSS/CSS 动态控制颜色.md"},o=l(`<p>#css</p><h1 id="css-动态控制颜色的笔记" tabindex="-1">CSS 动态控制颜色的笔记 <a class="header-anchor" href="#css-动态控制颜色的笔记" aria-hidden="true">#</a></h1><h2 id="clamp" tabindex="-1">clamp <a class="header-anchor" href="#clamp" aria-hidden="true">#</a></h2><p>css的区间选择函数 三个参数：[ Min, Val, Max ]，前后分别是最小、最大值，中间是动态值。</p><div class="language-css"><button title="Copy Code" class="copy"></button><span class="lang">css</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">--x: clamp(10</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">(var(--y) - 99) </span><span style="color:#FFCB6B;">*</span><span style="color:#A6ACCD;"> 99</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">20)</span></span>
<span class="line"></span></code></pre></div><ul><li>当--y小于100时，计算后结果小于等于0，取出10</li><li>当--y大于等于100时，计算后结果大于等于99，取出20</li></ul><p>为什么这里需要乘以 99 呢？其实是一个<strong>放大插值</strong>的操作，严格来讲，这个例子中只要大于 20 就够了，当乘以 20 以后，范围就变成了 <code>...、-20、0、 20、40、...</code>，也是包含 [10, 20] 这个区间的。 这个就是CSS 中 if 判断的基本原理了。</p><h2 id="通过饱和度变化" tabindex="-1">通过饱和度变化 <a class="header-anchor" href="#通过饱和度变化" aria-hidden="true">#</a></h2><p><img src="https://raw.githubusercontent.com/Hbisedm/my-blob-picGo/main/img/202206061142271.png" alt=""></p><div class="language-css"><button title="Copy Code" class="copy"></button><span class="lang">css</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">num</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  --s</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">clamp</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">0%</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">(var(--num</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> - </span><span style="color:#F78C6C;">99</span><span style="color:#A6ACCD;">) * 99%,85%)</span><span style="color:#89DDFF;">;</span><span style="color:#676E95;">/* &gt;100 */</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#B2CCD6;">color</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">hsl</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">27</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">var</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">--s</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">36%</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">num</span><span style="color:#89DDFF;">::</span><span style="color:#C792EA;">before</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#B2CCD6;">counter-reset</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> num </span><span style="color:#82AAFF;">var</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">--num</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#B2CCD6;">content</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">counter</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">num</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">num</span><span style="color:#89DDFF;">::</span><span style="color:#C792EA;">after</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#B2CCD6;">content</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">阅读</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">num</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">style</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">--num:1</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">num</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">num</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">style</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">--num:99</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">num</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">num</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">style</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">--num:102</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">num</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><p>由于饱和度有阈值，当饱和度低于0%时，仍然按照0%来渲染，所以上面的css代码中num标签可以改为：</p><div class="language-css"><button title="Copy Code" class="copy"></button><span class="lang">css</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">num</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  --s</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">min</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">(var(--num</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> - </span><span style="color:#F78C6C;">99</span><span style="color:#A6ACCD;">) * 99% ,85%)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#B2CCD6;">color</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">hsl</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">27</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">var</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">--s</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">36%</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>同样达到目的。</p><h3 id="效果图" tabindex="-1">效果图 <a class="header-anchor" href="#效果图" aria-hidden="true">#</a></h3><p><img src="https://raw.githubusercontent.com/Hbisedm/my-blob-picGo/main/img/202206061146576.png" alt=""></p><h2 id="完全控制颜色" tabindex="-1">完全控制颜色 <a class="header-anchor" href="#完全控制颜色" aria-hidden="true">#</a></h2><p>虽然饱和度变化控制比较容易，只需要控制一个参数就行了，但是有局限性。</p><blockquote><p>首先，这个灰色可能并不是设计师想要的灰色（实际可能会偏淡一点），再者，颜色变化不够自由，比如，默认是一个蓝色，超出一定数量后变成红色，这种就无法控制了。</p></blockquote><p>于是，我们需要用完全解析的方式来实现，原理其实就对颜色的 3 个参数进行控制，<code>rgb</code> 或者 <code>hsl</code> 都可以，假设两个颜色分别是<code>rgb(29 125 250)</code>和<code>rgb(244 67 54)</code>，如下 <img src="https://raw.githubusercontent.com/Hbisedm/my-blob-picGo/main/img/202206061148968.png" alt=""> 这里不仅有<strong>递增</strong>的变化，也有<strong>递减</strong>的变化（比如，125 =&gt; 67、250 =&gt; 54），所以在 calc 计算的时候需要取反，具体实现如下</p><div class="language-css"><button title="Copy Code" class="copy"></button><span class="lang">css</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">num</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    --r</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">clamp</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">29</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">(var(--num</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> - </span><span style="color:#F78C6C;">99</span><span style="color:#A6ACCD;">) * 999 + 29 , 250)</span><span style="color:#89DDFF;">;</span><span style="color:#676E95;">/*29, 250*/</span></span>
<span class="line"><span style="color:#A6ACCD;">    --g</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">clamp</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">67</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">(var(--num</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> - </span><span style="color:#F78C6C;">100</span><span style="color:#A6ACCD;">) * -999 + 67 , 125)</span><span style="color:#89DDFF;">;</span><span style="color:#676E95;">/*128, 67*/</span></span>
<span class="line"><span style="color:#A6ACCD;">    --b</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">clamp</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">54</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">(var(--num</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> - </span><span style="color:#F78C6C;">100</span><span style="color:#A6ACCD;">) * -999 + 54 , 250)</span><span style="color:#89DDFF;">;</span><span style="color:#676E95;">/*250, 54*/</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#B2CCD6;">color</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">rgb</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">var</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">--r</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">var</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">--g</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">var</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">--b</span><span style="color:#89DDFF;">));</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>注意点：</p><ol><li>系数需要足够大，这里是 999，比如第一条，当 --num 为 100 时，如果系数是 99，那么计算的结果是 99 + 29，没有达到最大值 250，所以需要改大一点，比如 999</li><li>clamp 支持的参数必须是 <code>[min, val, max]</code>，<code>min</code> 和 <code>max</code> 不能对调，所以以上代码再实现时做了交换</li></ol><h3 id="效果图-1" tabindex="-1">效果图 <a class="header-anchor" href="#效果图-1" aria-hidden="true">#</a></h3><p><img src="https://raw.githubusercontent.com/Hbisedm/my-blob-picGo/main/img/202206061154745.png" alt=""></p><h2 id="自动背景颜色变化" tabindex="-1">自动背景颜色变化 <a class="header-anchor" href="#自动背景颜色变化" aria-hidden="true">#</a></h2><blockquote><p>虽然颜色可以通过上述方式进行自动变化，但是还是有些不足的。</p><ol><li>代码量比较多，有些繁琐，容易混淆，特别是前后数字的顺序</li><li>只适用于两个颜色的变化，比如多种分段的颜色可能就无法实现了</li></ol></blockquote><p>背景相比于单纯的颜色来说，<strong>有一个非常大的优势在于多层叠加</strong>，如果控制每个背景的大小，不就可以控制最终展示的颜色了吗？</p><p>还是上面这个例子，我们先通过渐变绘制两层背景，上面是红色<code>rgb(244 67 54)</code>，下面是蓝色 <code>rgb(29 125 250)</code>，然后通过</p><p><code>background-size</code>来控制每一层的大小，原理是这样的</p><p><img src="https://raw.githubusercontent.com/Hbisedm/my-blob-picGo/main/img/202206061318470.png" alt=""></p><div class="language-css"><button title="Copy Code" class="copy"></button><span class="lang">css</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">num</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#B2CCD6;">background</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">linear-gradient</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">rgb</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">244</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">67</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">54</span><span style="color:#89DDFF;">),</span><span style="color:#82AAFF;">rgb</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">244</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">67</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">54</span><span style="color:#89DDFF;">)),</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">linear-gradient</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">rgb</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">29</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">125</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">250</span><span style="color:#89DDFF;">),</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">rgb</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">29</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">125</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">250</span><span style="color:#89DDFF;">));</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#B2CCD6;">color</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">#</span><span style="color:#A6ACCD;">fff</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#B2CCD6;">background-size</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">calc</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;"> (</span><span style="color:#82AAFF;">var</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">--num</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">99</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> * </span><span style="color:#F78C6C;">100%</span><span style="color:#A6ACCD;"> ), 100%</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h3 id="效果图-2" tabindex="-1">效果图 <a class="header-anchor" href="#效果图-2" aria-hidden="true">#</a></h3><p><img src="https://raw.githubusercontent.com/Hbisedm/my-blob-picGo/main/img/202206061320654.png" alt=""></p><p>其实这个计算根据简单，解释一下：</p><ol><li>当 <code>--num</code> 大于等于 100 时，计算结果肯定是大于 100% 的，所以上面的红色背景是可见的，整体表现为红色</li><li>当 <code>--num</code> 小于 100 时，计算结果肯定是小于等于 0% 的，即使是负数，background-size 也解析为 0%，所以上面的红色背景是不可见的，整体表现为下面的蓝色</li></ol><p>如果希望实现文字颜色的变化，可以利用到 <code>background-clip</code></p><div class="language-css"><button title="Copy Code" class="copy"></button><span class="lang">css</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">num</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#B2CCD6;">background</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">linear-gradient</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">rgb</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">244</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">67</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">54</span><span style="color:#89DDFF;">),</span><span style="color:#82AAFF;">rgb</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">244</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">67</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">54</span><span style="color:#89DDFF;">)),</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">linear-gradient</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">rgb</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">29</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">125</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">250</span><span style="color:#89DDFF;">),</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">rgb</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">29</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">125</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">250</span><span style="color:#89DDFF;">));</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#B2CCD6;">color</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> transparent</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#B2CCD6;">background-size</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">calc</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;"> (</span><span style="color:#82AAFF;">var</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">--num</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">99</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> * </span><span style="color:#F78C6C;">100%</span><span style="color:#A6ACCD;"> ), 100%</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">-webkit-background-clip</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> text</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h3 id="效果图-3" tabindex="-1">效果图 <a class="header-anchor" href="#效果图-3" aria-hidden="true">#</a></h3><p><img src="https://raw.githubusercontent.com/Hbisedm/my-blob-picGo/main/img/202206061320693.png" alt=""></p><h2 id="自动变色的进度条" tabindex="-1">自动变色的进度条 <a class="header-anchor" href="#自动变色的进度条" aria-hidden="true">#</a></h2><p>背景还可以适配多种颜色。实现这样一个可以自动变色的进度条，有这样几条规则：</p><ol><li>当进度小于 30% 时，背景呈红色</li><li>当进度大于 30% 并且 小于 60% 时，背景呈橙色</li><li>当进度大于 60% 并且 小于 90% 时，背景呈蓝色</li><li>当进度大于 90% 时，背景呈绿色</li></ol><p>示意如下 <img src="https://raw.githubusercontent.com/Hbisedm/my-blob-picGo/main/img/202206061322823.png" alt=""></p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">class</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">bar</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">style</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">--percent: 50;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><p>可以通过 CSS 伪类和计数器将 CSS 变量显示在页面，有兴趣的可以看看张鑫旭老师的这篇文章：<a href="https://www.zhangxinxu.com/wordpress/2019/05/content-css-var/" target="_blank" rel="noreferrer">小tips: 如何借助content属性显示CSS var变量值</a>（这个案例也是在这个基础上修改的），简单修饰一下</p><div class="language-css"><button title="Copy Code" class="copy"></button><span class="lang">css</span><pre class="shiki"><code><span class="line"><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">bar</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#B2CCD6;">display</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> flex</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#B2CCD6;">height</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">20px</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#B2CCD6;">background-color</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">#</span><span style="color:#A6ACCD;">f5f5f5</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">bar</span><span style="color:#89DDFF;">::</span><span style="color:#C792EA;">before</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#B2CCD6;">counter-reset</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> progress </span><span style="color:#82AAFF;">var</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">--percent</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#B2CCD6;">content</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">counter</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">progress</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">%</span><span style="color:#A6ACCD;">\\2002</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#B2CCD6;">display</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> flex</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#B2CCD6;">justify-content</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> end</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#B2CCD6;">width</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">calc</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">var</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">--percent</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1%</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#B2CCD6;">font-size</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">12px</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#B2CCD6;">color</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">#</span><span style="color:#A6ACCD;">fff</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#B2CCD6;">background</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">#</span><span style="color:#A6ACCD;">2486ff</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#B2CCD6;">white-space</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> nowrap</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p><strong>那么该如何根据进度自动变色呢？</strong></p><p>原理还是类似的！首先，还是将几个颜色通过渐变绘制出来，最后的颜色放在最前面，然后根据 CSS 变量控制背景尺寸就行了，原理示意如下</p><p><img src="https://raw.githubusercontent.com/Hbisedm/my-blob-picGo/main/img/202206061423450.png" alt=""></p><p>由于<code>background-size</code>本身有边界限制，当小于 0% 时，仍然按 0% 来渲染，所以这里可以不必用 <code>clamp</code>来加以限制，减少代码量，具体代码实现是这样的‘</p><div class="language-css"><button title="Copy Code" class="copy"></button><span class="lang">css</span><pre class="shiki"><code><span class="line"><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">bar</span><span style="color:#89DDFF;">::</span><span style="color:#C792EA;">before</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#B2CCD6;">counter-reset</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> progress </span><span style="color:#82AAFF;">var</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">--percent</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#B2CCD6;">content</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">counter</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">progress</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">%</span><span style="color:#A6ACCD;">\\2002</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#B2CCD6;">display</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> flex</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#B2CCD6;">justify-content</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> end</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#B2CCD6;">width</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">calc</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">var</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">--percent</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1%</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#B2CCD6;">font-size</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">12px</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#B2CCD6;">color</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">#</span><span style="color:#A6ACCD;">fff</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#B2CCD6;">white-space</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> nowrap</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#B2CCD6;">background-image</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">linear-gradient</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">green</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> green</span><span style="color:#89DDFF;">),</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#82AAFF;">linear-gradient</span><span style="color:#89DDFF;">(#</span><span style="color:#A6ACCD;">2486ff</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">#</span><span style="color:#A6ACCD;">2486ff</span><span style="color:#89DDFF;">),</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#82AAFF;">linear-gradient</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">orange</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> orange</span><span style="color:#89DDFF;">),</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#82AAFF;">linear-gradient</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">red</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> red</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#B2CCD6;">background-size</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">calc</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">(</span><span style="color:#82AAFF;">var</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">--percent</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">90</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> * </span><span style="color:#F78C6C;">100%</span><span style="color:#A6ACCD;">) 100%,</span></span>
<span class="line"><span style="color:#A6ACCD;">            calc((var(--percent) - 60) * 100%) 100%,</span></span>
<span class="line"><span style="color:#A6ACCD;">            calc((var(--percent) - 30) * 100%) 100%,</span></span>
<span class="line"><span style="color:#A6ACCD;">            100% 100%</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>简单看一下里面的逻辑：</p><ol><li>当 <code>--percent</code> 大于 90 时，所有背景的尺寸都是 100%，自然显示<strong>最上层的绿色</strong></li><li>当 <code>--percent</code> 大于 60 ，小于等于 90 时，只有最上层的绿色尺寸是 0，其他背景尺寸都是 100%，所以显示<strong>第二层的蓝色</strong></li><li>当 <code>--percent</code> 大于 30 ，小于等于 60 时，上面两层背景尺寸都是 0，下面两层背景尺寸都是 100%，所以显示<strong>第三层的橙色</strong></li><li>当 <code>--percent</code> 小于 30 时，只有最底层的尺寸是 100%，其他都是 0，所以显示<strong>最底层的红色</strong></li></ol><p>背景自动变色已经实现了，不过数字还有一点小问题，<strong>当进度条比较小时，百分比数字明显放不下了</strong>，如下 <img src="https://raw.githubusercontent.com/Hbisedm/my-blob-picGo/main/img/202206061428574.png" alt=""> 所以，在这种情况下<strong>应该把百分比数字移到外面来，并且变成红色</strong>。</p><p>移到外面，可以通过<code>text-indent</code>属性来实现，文字颜色从白色变成红色（<code>hsl(0,100%,50%)</code>），可以通过亮度来实现，<strong>当亮度为 100% 时，任何颜色都会变成白色</strong>，由于亮度本身有限制，当超过 100% 时，仍然按照 100% 来渲染，这一点可以利用起来，具体实现如下</p><div class="language-css"><button title="Copy Code" class="copy"></button><span class="lang">css</span><pre class="shiki"><code><span class="line"><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">bar</span><span style="color:#89DDFF;">::</span><span style="color:#C792EA;">before</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#B2CCD6;">counter-reset</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> progress </span><span style="color:#82AAFF;">var</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">--percent</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#B2CCD6;">content</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">counter</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">progress</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">%</span><span style="color:#A6ACCD;">\\2002</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#B2CCD6;">display</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> flex</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#B2CCD6;">justify-content</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> end</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#B2CCD6;">width</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">calc</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">var</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">--percent</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1%</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#B2CCD6;">font-size</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">12px</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#B2CCD6;">color</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">#</span><span style="color:#A6ACCD;">fff</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#B2CCD6;">white-space</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> nowrap</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#B2CCD6;">background-image</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">linear-gradient</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">green</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> green</span><span style="color:#89DDFF;">),</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#82AAFF;">linear-gradient</span><span style="color:#89DDFF;">(#</span><span style="color:#A6ACCD;">2486ff</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">#</span><span style="color:#A6ACCD;">2486ff</span><span style="color:#89DDFF;">),</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#82AAFF;">linear-gradient</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">orange</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> orange</span><span style="color:#89DDFF;">),</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#82AAFF;">linear-gradient</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">red</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> red</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#B2CCD6;">background-size</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">calc</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">(</span><span style="color:#82AAFF;">var</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">--percent</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">90</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> * </span><span style="color:#F78C6C;">100%</span><span style="color:#A6ACCD;">) 100%,</span></span>
<span class="line"><span style="color:#A6ACCD;">            calc((var(--percent) - 60) * 100%) 100%,</span></span>
<span class="line"><span style="color:#A6ACCD;">            calc((var(--percent) - 30) * 100%) 100%,</span></span>
<span class="line"><span style="color:#A6ACCD;">            100% 100%</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        --l</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">max</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">50%</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">(var(--percent</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> - </span><span style="color:#F78C6C;">9</span><span style="color:#A6ACCD;">) * 100%)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#B2CCD6;">color</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">hsl</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">100%</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">var</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">--l</span><span style="color:#89DDFF;">));</span></span>
<span class="line"><span style="color:#A6ACCD;">        --offset</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">clamp</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">0%</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">(var(--percent</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> - </span><span style="color:#F78C6C;">10</span><span style="color:#A6ACCD;">) * -120%, 120%)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#B2CCD6;">text-indent</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">var</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">--offset</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p><img src="https://raw.githubusercontent.com/Hbisedm/my-blob-picGo/main/img/202206061435150.png" alt=""></p><p>注意点：</p><ol><li>有2个<code>color</code>属性，后面的会覆盖上面的，hsl(0, 100%, 亮度变量) 0是色相，红色的色相为0， 第二个是饱和度，为100时，颜色最鲜艳，第三个是亮度，当亮度为100%时，任何颜色都会变成白色展示给用户。</li><li><code>text-indent</code>：一个文本缩进属性。</li><li><code>max</code>：一个取出最大值的css函数，上面代码，当小于10时，<code>--l</code>取50%，否则为100%</li></ol><h2 id="总结" tabindex="-1">总结 <a class="header-anchor" href="#总结" aria-hidden="true">#</a></h2><p><a href="https://codepen.io/hbisedm/pen/wvyxxmj" target="_blank" rel="noreferrer">所有代码在codepen</a> 以上就是关于 CSS 自动变色技术的全部内容了，核心其实就是边界值的灵活计算，是不是非常强大呢？这里总结一下实现要点：</p><ol><li>实现原理是 CSS 变量 和 calc 计算</li><li>clamp 可以限制表达式的区间范围</li><li>通用核心代码 --x: clamp(10,(var(--y) - 99) * 99,20)</li><li>饱和度可以控制颜色的鲜艳程度，当饱和度为0，就变成灰色了</li><li>完全控制颜色变化，可以用 rgb 或者 hsl 完全表示出来，分别进行计算</li><li>以上方案仅适用于两个颜色的切换</li><li>多层背景叠加可以实现多种颜色切换</li><li>多层背景切换的核心在于背景尺寸的控制</li><li>亮度为 100% 时，颜色就变成了白色</li><li>部分属性本身有“阈值”，充分利用这种特性可以减少区域判断</li></ol><p>当然，这种技术不仅仅适用于颜色的变化，只要是数值的变化都可以，比如文章中<code>text-indent</code>的切换，充分利用这些小技巧可以让我们的页面更加灵活，更加精致。</p><h2 id="参考链接" tabindex="-1">参考链接 <a class="header-anchor" href="#参考链接" aria-hidden="true">#</a></h2><p><a href="https://segmentfault.com/a/1190000041914954" target="_blank" rel="noreferrer">css auto color</a></p>`,66),e=[o];function c(t,r,D,y,C,F){return a(),n("div",null,e)}const d=s(p,[["render",c]]);export{i as __pageData,d as default};
